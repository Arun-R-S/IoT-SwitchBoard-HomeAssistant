<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">


    <title>Config Settings</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <div id="wrapper" class="wrapper-content">
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li class="">
                    <a href="#">
                        Settings
                    </a>
                </li>
                <div class="list-group list-group-flush account-settings-links">
                    <li>
                        <a class="list-group-item list-group-item-action" data-toggle="list" href="index.html"><svg
                                xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                class="bi bi-cpu" viewBox="0 0 16 16">
                                <path
                                    d="M5 0a.5.5 0 0 1 .5.5V2h1V.5a.5.5 0 0 1 1 0V2h1V.5a.5.5 0 0 1 1 0V2h1V.5a.5.5 0 0 1 1 0V2A2.5 2.5 0 0 1 14 4.5h1.5a.5.5 0 0 1 0 1H14v1h1.5a.5.5 0 0 1 0 1H14v1h1.5a.5.5 0 0 1 0 1H14v1h1.5a.5.5 0 0 1 0 1H14a2.5 2.5 0 0 1-2.5 2.5v1.5a.5.5 0 0 1-1 0V14h-1v1.5a.5.5 0 0 1-1 0V14h-1v1.5a.5.5 0 0 1-1 0V14h-1v1.5a.5.5 0 0 1-1 0V14A2.5 2.5 0 0 1 2 11.5H.5a.5.5 0 0 1 0-1H2v-1H.5a.5.5 0 0 1 0-1H2v-1H.5a.5.5 0 0 1 0-1H2v-1H.5a.5.5 0 0 1 0-1H2A2.5 2.5 0 0 1 4.5 2V.5A.5.5 0 0 1 5 0m-.5 3A1.5 1.5 0 0 0 3 4.5v7A1.5 1.5 0 0 0 4.5 13h7a1.5 1.5 0 0 0 1.5-1.5v-7A1.5 1.5 0 0 0 11.5 3zM5 6.5A1.5 1.5 0 0 1 6.5 5h3A1.5 1.5 0 0 1 11 6.5v3A1.5 1.5 0 0 1 9.5 11h-3A1.5 1.5 0 0 1 5 9.5zM6.5 6a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5z" />
                            </svg></i> Device</a>
                    </li>
                    <li>
                        <a class="list-group-item list-group-item-action active" data-toggle="list" href="#"><svg
                                xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                class="bi bi-ui-radios-grid" viewBox="0 0 16 16">
                                <path
                                    d="M3.5 15a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5m9-9a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5m0 9a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5M16 3.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0m-9 9a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0m5.5 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m-9-11a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m0 2a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7" />
                            </svg> Config</a>
                    </li>
                    <li>
                        <a class="list-group-item list-group-item-action" data-toggle="list" href="switches.html"><svg
                                xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                class="bi bi-info-circle" viewBox="0 0 16 16">
                                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16" />
                                <path
                                    d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0" />
                            </svg> Switches</a>
                    </li>
                </div>
            </ul>
        </div>
        <div id="page-content-wrapper">
            <nav class="navbar navbar-default">
                <div class="container-fluid">
                    <div class="navbar-header">
                        <button class="btn-menu btn btn-success btn-toggle-menu" type="button">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                class="bi bi-list" viewBox="0 0 16 16">
                                <path fill-rule="evenodd"
                                    d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5" />
                            </svg>
                        </button>
                    </div>
                    <div class="">
                        <ul class="nav navbar-nav navbar-right">

                            <li>
                                <p>
                                    <span class="_DeviceName">--</span>
                                    <button class="btn btn-danger" id="restartDeviceBtn" title="Restart System"><svg
                                            xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                            fill="currentColor" class="bi bi-arrow-repeat" viewBox="0 0 16 16">
                                            <path
                                                d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41m-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9" />
                                            <path fill-rule="evenodd"
                                                d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5 5 0 0 0 8 3M3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9z" />
                                        </svg></button>
                                </p>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
            <div class="col-12">
                <div class="tab-content">
                    <div class="tab-pane fade active show" id="account-general">
                        <div class="card-body align-items-center">

                            <div class="row">
                                <div class="col-md-12 col-lg-6 col-xl-6 ">
                                    <div class="media-body ml-4">
                                        <h1>Files</h1>
                                        <ul id="fileList"></ul>
                                    </div>
                                    <hr>
                                </div>

                                <div class="col-md-12 col-lg-6 col-xl-6 ">
                                    <div class="media-body ml-4">
                                        <input type="file" id="fileInput">
                                        <button id="uploadButton">Upload File</button>
                                    </div>
                                </div>
                            </div>


                        </div>
                        <hr class="border-light m-0">
                        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                            <h6 class="mb-2 text-danger" style="font-weight: bolder;font-size: 20px;" id="errors"></h6>
                        </div>
                        <div class="card-body">
                            <div class="row gutters">

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script type="text/javascript">

        function fetchDeviceData() {

            var xhr = new XMLHttpRequest();
            var url = GLOBAL_host + '/api/getDeviceDetails';
            xhr.onreadystatechange = function () {
                if (xhr.readyState === XMLHttpRequest.DONE) {
                    if (xhr.status === 200) {
                        // Request was successful, parse the response
                        var data = JSON.parse(xhr.responseText);
                        updateInnerHtmlForClassNames("_DeviceName", data.DeviceName);
                        //updateInnerHtmlForClassNames("_DeviceName",data.DeviceName);
                        updateInnerHtmlForClassNames("_DeviceId", data.DeviceID);
                        updateInnerHtmlForClassNames("_DeviceFirmwareVersion", data.DeviceFirmwareVersion);
                        updateInnerHtmlForClassNames("_DeviceHardware", data.DeviceHardware);
                        updateInnerHtmlForClassNames("_DeviceManufacturer", data.DeviceManufacturer);
                        // Process the JSON response data
                        console.log(data);
                    } else {
                        // Request failed
                        console.error('Request failed with status:', xhr);
                        alert('Request failed with status:' + xhr.status);
                    }
                }
            };
            xhr.open('GET', url, true);
            //xhr.setRequestHeader('Authorization', 'Basic ' + btoa('adminUsername:adminPassword'));
            xhr.send();
        }
        function fetchFilesDetails() {
            var fileList = document.getElementById('fileList');

            // AJAX request to fetch file list
            var xhr = new XMLHttpRequest();
            var url = GLOBAL_host + "/api/getFilesList";
            xhr.open('GET', url, true); // Adjust the URL as needed
            xhr.onload = function () {
                if (xhr.status === 200) {
                    var files = JSON.parse(xhr.responseText);
                    files.forEach(function (file) {
                        var li = document.createElement('li');
                        var span = document.createElement('span');
                        var aTag = document.createElement('a');
                        li.textContent = file+' - ';
                        aTag.href = file;
                        aTag.target = "_blank";
                        aTag.innerHTML = " View";
                        console.log(aTag);
                        fileList.appendChild(li);
                        span.appendChild(aTag);
                        li.appendChild(span);
                    });
                } else {
                    console.error('Error:', xhr.statusText);
                }
            };
            xhr.onerror = function () {
                console.error('Error:', xhr.statusText);
            };
            xhr.send();
        }
        document.addEventListener('DOMContentLoaded', function () {
            setTimeout(fetchDeviceData, 1000);
            setTimeout(fetchFilesDetails, 2000);
        });
        document.addEventListener('DOMContentLoaded', function () {
            var btnToggleMenu = document.querySelectorAll('.btn-toggle-menu');
            btnToggleMenu.forEach(function (btn) {
                btn.addEventListener('click', function () {
                    document.getElementById('wrapper').classList.toggle('toggled');
                });
            });
        });
        document.getElementById('uploadButton').addEventListener('click', function () {
            var fileInput = document.getElementById('fileInput');
            var file = fileInput.files[0];
            if (file) {
                var formData = new FormData();
                formData.append('file', file);

                var xhr = new XMLHttpRequest();
                var url = GLOBAL_host+"/api/uploadFile";
                xhr.open('POST', url, true); // Adjust the URL as needed
                xhr.onload = function () {
                    if (xhr.status === 200) {
                        console.log('File uploaded successfully');
                        alert('File uploaded successfully');
                    } else {
                        console.error('Error:', xhr.statusText);
                        alert('Error uploading file');
                    }
                };
                xhr.onerror = function () {
                    console.error('Error:', xhr.statusText);
                    alert('Error uploading file');
                };
                xhr.send(formData);
            } else {
                alert('Please select a file to upload');
            }
        });
    </script>
</body>

</html>